<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy New Year, My Love</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', 'Arial', sans-serif;
            background: linear-gradient(135deg, #0c0c2e 0%, #1a1a3e 30%, #2d1b3e 70%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        /* Fireworks Canvas */
        #fireworksCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        /* Main container */
        .container {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 2.5rem;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 20px;
            box-shadow: 
                0 0 40px rgba(255, 105, 180, 0.3),
                inset 0 0 20px rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            max-width: 1200px;
            width: 100%;
            border: 1px solid rgba(255, 105, 180, 0.2);
            animation: containerFloat 12s ease-in-out infinite;
        }
        
        @keyframes containerFloat {
            0%, 100% { transform: translateY(0) rotate(0.3deg); }
            50% { transform: translateY(-5px) rotate(-0.3deg); }
        }
        
        h1 {
            font-size: 3.2rem;
            margin-bottom: 1.2rem;
            background: linear-gradient(45deg, #ff69b4, #ff1493);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 20px rgba(255, 105, 180, 0.3);
            font-weight: 700;
            letter-spacing: 0.5px;
        }
        
        .year {
            font-size: 4.5rem;
            font-weight: 800;
            color: #ff69b4;
            text-shadow: 
                0 0 20px rgba(255, 105, 180, 0.6);
            margin: 1.2rem 0;
            animation: yearGlow 5s ease-in-out infinite alternate;
        }
        
        @keyframes yearGlow {
            0% { 
                transform: scale(1); 
                text-shadow: 0 0 20px rgba(255, 105, 180, 0.6);
            }
            100% { 
                transform: scale(1.03); 
                text-shadow: 0 0 30px rgba(255, 105, 180, 0.8);
            }
        }
        
        .message {
            font-size: 1.4rem;
            margin-bottom: 2.5rem;
            line-height: 1.6;
            color: #f0e6ff;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* 6 Polaroid Photos Grid */
        .polaroid-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2.5rem;
            margin: 2.5rem auto;
            max-width: 1000px;
        }
        
        .polaroid {
            position: relative;
            background: white;
            padding: 15px 15px 50px;
            box-shadow: 
                0 10px 25px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.9);
            transition: all 0.5s ease;
            opacity: 0;
            transform: translateY(30px) rotate(0deg);
            height: 320px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .polaroid.show {
            opacity: 1;
            transform: translateY(0) rotate(var(--rotation));
        }
        
        /* Different rotations for each polaroid */
        .polaroid:nth-child(1) { --rotation: -3deg; transition-delay: 0.1s; }
        .polaroid:nth-child(2) { --rotation: 2deg; transition-delay: 0.2s; }
        .polaroid:nth-child(3) { --rotation: -1deg; transition-delay: 0.3s; }
        .polaroid:nth-child(4) { --rotation: 3deg; transition-delay: 0.4s; }
        .polaroid:nth-child(5) { --rotation: -2deg; transition-delay: 0.5s; }
        .polaroid:nth-child(6) { --rotation: 1deg; transition-delay: 0.6s; }
        
        .polaroid:hover {
            transform: translateY(-10px) rotate(0deg) scale(1.05);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.5),
                0 0 0 2px rgba(255, 105, 180, 0.3),
                0 0 25px rgba(255, 20, 147, 0.3);
            z-index: 20;
        }
        
        .polaroid-image {
            width: 100%;
            height: 220px;
            overflow: hidden;
            background: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .polaroid-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 1s ease;
        }
        
        .polaroid:hover .polaroid-image img {
            transform: scale(1.08);
        }
        
        .polaroid-caption {
            font-family: 'Courier New', monospace;
            color: #333;
            font-size: 1.2rem;
            text-align: center;
            margin-top: 15px;
            font-weight: 600;
            letter-spacing: 0.5px;
            padding: 0 10px;
        }
        
        /* Polaroid tape effect */
        .polaroid-tape {
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 15px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 3px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        /* Read Message Button */
        .read-message-btn {
            padding: 1rem 2.5rem;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            background: linear-gradient(45deg, #ff69b4, #ff1493);
            color: white;
            box-shadow: 
                0 8px 20px rgba(255, 105, 180, 0.25);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }
        
        .read-message-btn:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 12px 25px rgba(255, 105, 180, 0.35);
            background: linear-gradient(45deg, #ff1493, #ff69b4);
        }
        
        .read-message-btn:active {
            transform: translateY(-2px);
        }
        
        .read-message-btn i {
            animation: heartBeat 2.5s infinite;
        }
        
        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .signature {
            margin-top: 2.5rem;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9rem;
            font-style: italic;
        }
        
        /* Hearts Container */
        #heartsContainer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }
        
        .heart {
            position: absolute;
            pointer-events: none;
            z-index: 2;
            opacity: 0;
            filter: drop-shadow(0 0 8px rgba(255, 105, 180, 0.6));
        }
        
        /* Love Letter Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.5s ease;
            padding: 20px;
        }
        
        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }
        
        .love-letter {
            background: linear-gradient(135deg, rgba(255, 240, 245, 0.97) 0%, rgba(255, 228, 236, 0.97) 100%);
            color: #5a2a5a;
            width: 100%;
            max-width: 700px;
            max-height: 85vh;
            border-radius: 20px;
            box-shadow: 
                0 25px 60px rgba(0, 0, 0, 0.6);
            position: relative;
            transform: scale(0.95) translateY(30px);
            opacity: 0;
            transition: transform 0.5s ease, opacity 0.5s ease;
            display: flex;
            flex-direction: column;
            border: 2px solid rgba(255, 105, 180, 0.3);
        }
        
        .modal-overlay.active .love-letter {
            transform: scale(1) translateY(0);
            opacity: 1;
        }
        
        .love-letter::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff69b4, #ff1493, #ff69b4);
            border-radius: 20px 20px 0 0;
        }
        
        .love-letter-header {
            padding: 2rem 2rem 1rem;
            border-bottom: 1px dashed rgba(255, 105, 180, 0.3);
            background: rgba(255, 255, 255, 0.95);
            flex-shrink: 0;
        }
        
        .love-letter h2 {
            color: #ff1493;
            font-size: 2.2rem;
            text-align: center;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .letter-date {
            text-align: center;
            color: #ff69b4;
            font-style: italic;
            font-size: 1rem;
        }
        
        .letter-content-wrapper {
            flex: 1;
            overflow-y: auto;
            padding: 0 2rem;
        }
        
        .letter-content-wrapper::-webkit-scrollbar {
            width: 6px;
        }
        
        .letter-content-wrapper::-webkit-scrollbar-track {
            background: rgba(255, 105, 180, 0.1);
            border-radius: 10px;
            margin: 10px 0;
        }
        
        .letter-content-wrapper::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #ff69b4, #ff1493);
            border-radius: 10px;
        }
        
        .letter-content {
            font-size: 1.15rem;
            line-height: 1.7;
            text-align: left;
            padding: 1.5rem 0;
        }
        
        .letter-content p {
            margin-bottom: 1.2rem;
            position: relative;
            padding-left: 1.2rem;
        }
        
        .letter-content p::before {
            content: '❤';
            position: absolute;
            left: 0;
            top: 2px;
            color: #ff69b4;
            font-size: 0.9rem;
        }
        
        .love-letter-footer {
            padding: 1.5rem 2rem 2rem;
            border-top: 1px dashed rgba(255, 105, 180, 0.3);
            background: rgba(255, 255, 255, 0.95);
            flex-shrink: 0;
        }
        
        .letter-signature {
            text-align: right;
            font-style: italic;
            font-size: 1.3rem;
            color: #ff1493;
            font-weight: 600;
            margin-top: 0.5rem;
        }
        
        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 105, 180, 0.9);
            border: none;
            font-size: 1.2rem;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            z-index: 101;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        .close-modal:hover {
            transform: rotate(90deg);
            background: rgba(255, 20, 147, 0.9);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }
        
        /* Responsive design */
        @media (max-width: 900px) {
            .polaroid-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 2rem;
                max-width: 700px;
            }
            
            .polaroid {
                height: 300px;
            }
            
            .polaroid-image {
                height: 200px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .year {
                font-size: 3.5rem;
            }
            
            .message {
                font-size: 1.2rem;
            }
            
            .polaroid-grid {
                grid-template-columns: 1fr;
                max-width: 400px;
            }
            
            .polaroid {
                height: 320px;
            }
            
            .polaroid-image {
                height: 220px;
            }
            
            .love-letter {
                max-height: 90vh;
            }
            
            .love-letter-header,
            .letter-content-wrapper,
            .love-letter-footer {
                padding: 1.5rem;
            }
            
            .love-letter h2 {
                font-size: 1.8rem;
            }
            
            .letter-content {
                font-size: 1rem;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 2rem;
            }
            
            .year {
                font-size: 2.8rem;
            }
            
            .polaroid {
                padding: 12px 12px 40px;
                height: 280px;
            }
            
            .polaroid-image {
                height: 190px;
            }
            
            .polaroid-caption {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Fireworks Canvas -->
    <canvas id="fireworksCanvas"></canvas>
    
    <!-- Hearts Container -->
    <div id="heartsContainer"></div>
    
    <!-- Main Content -->
    <div class="container">
        <h1>Happy New Year, My Love</h1>
        <div class="year" id="currentYear">2025</div>
        
        <!-- 6 Polaroid Photos Grid -->
        <div class="polaroid-grid">
            <!-- Polaroid 1 -->
            <div class="polaroid" id="polaroid1">
                <div class="polaroid-tape"></div>
                <div class="polaroid-image">
                    <!-- REPLACE THIS IMAGE URL WITH YOUR PHOTO -->
                    <img src="5.jpg" alt="Our Memory 1">
                </div>
                <div class="polaroid-caption">Our First Date</div>
            </div>
            
            <!-- Polaroid 2 -->
            <div class="polaroid" id="polaroid2">
                <div class="polaroid-tape"></div>
                <div class="polaroid-image">
                    <!-- REPLACE THIS IMAGE URL WITH YOUR PHOTO -->
                    <img src="2.jpg" alt="Our Memory 2">
                </div>
                <div class="polaroid-caption">First Date Travelling</div>
            </div>
            
            <!-- Polaroid 3 -->
            <div class="polaroid" id="polaroid3">
                <div class="polaroid-tape"></div>
                <div class="polaroid-image">
                    <!-- REPLACE THIS IMAGE URL WITH YOUR PHOTO -->
                    <img src="3.jpg" alt="Our Memory 3">
                </div>
                <div class="polaroid-caption">Cuties</div>
            </div>
            
            <!-- Polaroid 4 -->
            <div class="polaroid" id="polaroid4">
                <div class="polaroid-tape"></div>
                <div class="polaroid-image">
                    <!-- REPLACE THIS IMAGE URL WITH YOUR PHOTO -->
                    <img src="6.jpg" alt="Our Memory 4">
                </div>
                <div class="polaroid-caption">Smile</div>
            </div>
            
            <!-- Polaroid 5 -->
            <div class="polaroid" id="polaroid5">
                <div class="polaroid-tape"></div>
                <div class="polaroid-image">
                    <!-- REPLACE THIS IMAGE URL WITH YOUR PHOTO -->
                    <img src="1.jpg" alt="Our Memory 5">
                </div>
                <div class="polaroid-caption">Mwaa</div>
            </div>
            
            <!-- Polaroid 6 -->
            <div class="polaroid" id="polaroid6">
                <div class="polaroid-tape"></div>
                <div class="polaroid-image">
                    <!-- REPLACE THIS IMAGE URL WITH YOUR PHOTO -->
                    <img src="4.jpg" alt="Our Memory 6">
                </div>
                <div class="polaroid-caption">Forever Us</div>
            </div>
        </div>
        
        <p class="message">
            As we welcome 2026, I'm filled with gratitude for every moment we've shared. 
            These photos remind me of our beautiful journey together. May this new year bring us 
            even more love, laughter, and unforgettable memories.
        </p>
        
        <button class="read-message-btn" id="readMessageBtn">
            <i class="fas fa-heart"></i> Read My Love Letter
        </button>
        
        <div class="signature">
            With all my love, forever and always
        </div>
    </div>
    
    <!-- Love Letter Modal -->
     <div class="modal-overlay" id="modalOverlay">
        <div class="love-letter">
            <button class="close-modal" id="closeModal">
                <i class="fas fa-times"></i>
            </button>
            
        
        <div class="love-letter">
            <div class="love-letter-header">
                <h2>My Dearest Love,</h2>
                <div class="letter-date">New Year's Eve, 2025</div>
            </div>
            
            <div class="letter-content-wrapper">
                <div class="letter-content">
                    <p>
                        Hi Love Happy New Yearrrrr, I love you so muchhh, My best new Year because I have you, 
                        I hope na as we face 2026, all the challenges that we are about to face, we are going to surpass it all 
                        and we'll grow stronger together and individually, I am wishing you a goodluck this 2026 and I hope too na sa mga problema nato ma solbad na nato together.
                         I love you mahal you're so pretty always. I love you so muchhhhhhhh.
                    </p>
                </div>
            </div>
            
            <div class="love-letter-footer">
                <div class="letter-signature">
                    With all my heart, now and always,<br>
                    Forever Yours
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize canvas for fireworks
        const canvas = document.getElementById('fireworksCanvas');
        const ctx = canvas.getContext('2d');
        const heartsContainer = document.getElementById('heartsContainer');
        
        // Set canvas dimensions
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // Set current year
        const currentYearElement = document.getElementById('currentYear');
        const currentYear = new Date().getFullYear() + 1;
        currentYearElement.textContent = currentYear;
        
        // Smoothing variables
        let lastTime = 0;
        const fps = 60;
        const interval = 1000 / fps;
        
        // Arrays for particles
        let fireworks = [];
        let particles = [];
        
        // Romantic colors for fireworks
        const romanticColors = [
            '#ff69b4', '#ff1493', '#ff6bc9', '#ff8ed4', 
            '#e91e63', '#c2185b', '#ad1457', '#880e4f'
        ];
        
        // Particle class for smooth animation
        class Particle {
            constructor(x, y, vx, vy, color, size, life, gravity = 0.05, fade = true) {
                this.x = x;
                this.y = y;
                this.vx = vx;
                this.vy = vy;
                this.color = color;
                this.size = size;
                this.life = life;
                this.maxLife = life;
                this.gravity = gravity;
                this.fade = fade;
                this.alpha = 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += this.gravity;
                this.life--;
                
                if (this.fade) {
                    this.alpha = this.life / this.maxLife;
                }
                
                return this.life > 0;
            }
            
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }
        
        // Firework class
        class Firework {
            constructor(x, y, targetX, targetY) {
                this.x = x;
                this.y = y;
                this.startX = x;
                this.startY = y;
                this.targetX = targetX;
                this.targetY = targetY;
                this.speed = 2 + Math.random() * 1.5;
                this.angle = Math.atan2(targetY - y, targetX - x);
                this.distance = Math.hypot(targetX - x, targetY - y);
                this.traveled = 0;
                this.trail = [];
                this.color = romanticColors[Math.floor(Math.random() * romanticColors.length)];
                this.exploded = false;
            }
            
            update() {
                if (this.exploded) return false;
                
                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed;
                
                this.traveled = Math.hypot(this.x - this.startX, this.y - this.startY);
                
                // Add trail particles
                this.trail.push(new Particle(
                    this.x, this.y, 
                    (Math.random() - 0.5) * 0.5, 
                    (Math.random() - 0.5) * 0.5,
                    this.color, 
                    1 + Math.random() * 2, 
                    15, 
                    0.01, 
                    true
                ));
                
                // Limit trail length
                if (this.trail.length > 8) {
                    this.trail.shift();
                }
                
                // Check if reached target
                if (this.traveled >= this.distance * 0.95) {
                    this.explode();
                    return false;
                }
                
                return true;
            }
            
            explode() {
                this.exploded = true;
                
                // Create explosion particles
                const particleCount = 60 + Math.floor(Math.random() * 30);
                for (let i = 0; i < particleCount; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const speed = 1 + Math.random() * 2.5;
                    
                    particles.push(new Particle(
                        this.x, this.y,
                        Math.cos(angle) * speed,
                        Math.sin(angle) * speed,
                        this.color,
                        1.5 + Math.random() * 2,
                        40 + Math.random() * 40,
                        0.05,
                        true
                    ));
                }
                
                // Create heart from explosion 20% of the time
                if (Math.random() < 0.2) {
                    createHeart(this.x, this.y, true);
                }
            }
            
            draw() {
                // Draw trail
                for (const particle of this.trail) {
                    particle.draw();
                }
                
                // Draw firework body
                ctx.save();
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw glow
                const gradient = ctx.createRadialGradient(
                    this.x, this.y, 0,
                    this.x, this.y, 12
                );
                gradient.addColorStop(0, this.color + '80');
                gradient.addColorStop(1, 'transparent');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 12, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }
        
        // Heart creation with smooth animation
        function createHeart(x, y, fromExplosion = false) {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = '❤️';
            
            // Random romantic color
            const color = romanticColors[Math.floor(Math.random() * 4)];
            heart.style.color = color;
            
            // Random size
            const size = 20 + Math.random() * 25;
            heart.style.fontSize = `${size}px`;
            
            // Starting position
            heart.style.left = `${x}px`;
            heart.style.top = `${y}px`;
            
            heartsContainer.appendChild(heart);
            
            // Animation properties
            const angle = Math.random() * Math.PI * 2;
            const speed = fromExplosion ? 2 + Math.random() * 2 : 0.5 + Math.random();
            const velocity = {
                x: Math.cos(angle) * speed,
                y: Math.sin(angle) * speed - (fromExplosion ? 3 : 1.5)
            };
            
            let life = 100 + Math.random() * 100;
            const rotation = (Math.random() - 0.5) * 1.5;
            let rotationAngle = 0;
            
            // Animation loop for heart
            function animateHeart() {
                // Apply physics
                velocity.y += 0.04; // Gravity
                velocity.x *= 0.995; // Air resistance
                
                // Update position
                x += velocity.x;
                y += velocity.y;
                
                // Update rotation
                rotationAngle += rotation;
                
                // Update life and opacity
                life--;
                const opacity = Math.min(1, life / 150);
                
                // Apply to DOM element
                heart.style.left = `${x}px`;
                heart.style.top = `${y}px`;
                heart.style.opacity = opacity;
                heart.style.transform = `rotate(${rotationAngle}deg)`;
                
                // Continue or remove
                if (life > 0 && opacity > 0.05) {
                    requestAnimationFrame(animateHeart);
                } else {
                    heart.remove();
                }
            }
            
            // Start animation
            requestAnimationFrame(animateHeart);
        }
        
        // Launch firework with smooth trajectory
        function launchFirework() {
            const startX = Math.random() * canvas.width;
            const startY = canvas.height;
            const targetX = canvas.width * 0.2 + Math.random() * canvas.width * 0.6;
            const targetY = canvas.height * 0.1 + Math.random() * canvas.height * 0.3;
            
            fireworks.push(new Firework(startX, startY, targetX, targetY));
        }
        
        // Smooth animation loop
        function animate(timestamp) {
            requestAnimationFrame(animate);
            
            // Control frame rate for smoother animation
            const delta = timestamp - lastTime;
            if (delta < interval) return;
            lastTime = timestamp - (delta % interval);
            
            // Clear canvas with fade effect
            ctx.fillStyle = 'rgba(12, 12, 46, 0.08)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Update and draw all particles
            for (let i = particles.length - 1; i >= 0; i--) {
                if (particles[i].update()) {
                    particles[i].draw();
                } else {
                    particles.splice(i, 1);
                }
            }
            
            // Update and draw fireworks
            for (let i = fireworks.length - 1; i >= 0; i--) {
                if (fireworks[i].update()) {
                    fireworks[i].draw();
                } else {
                    fireworks.splice(i, 1);
                }
            }
        }
        
        // Initialize animation
        requestAnimationFrame(animate);
        
        // Show polaroids with animation
        function showPolaroids() {
            const polaroids = document.querySelectorAll('.polaroid');
            polaroids.forEach(polaroid => {
                polaroid.classList.add('show');
            });
        }
        
        // Modal controls
        const readMessageBtn = document.getElementById('readMessageBtn');
        const modalOverlay = document.getElementById('modalOverlay');
        const closeModal = document.getElementById('closeModal');
        
        // Start with some fireworks
        setTimeout(() => {
            launchFirework();
            launchFirework();
        }, 500);
        
        setTimeout(() => {
            launchFirework();
            launchFirework();
            launchFirework();
        }, 1500);
        
        // Periodic fireworks (less frequent for smoother performance)
        setInterval(() => {
            if (Math.random() < 0.3 && fireworks.length < 6) {
                launchFirework();
            }
        }, 2500);
        
        // Create hearts periodically
        setInterval(() => {
            if (Math.random() < 0.2) {
                const x = Math.random() * canvas.width;
                const y = canvas.height + 50;
                createHeart(x, y);
            }
        }, 3000);
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Show polaroids after a short delay
            setTimeout(showPolaroids, 300);
            
            // Create initial hearts
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const x = Math.random() * canvas.width;
                    const y = Math.random() * canvas.height;
                    createHeart(x, y);
                }, i * 400);
            }
        });
        
        // Modal controls
        readMessageBtn.addEventListener('click', () => {
            modalOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Create extra hearts when opening the letter
            for (let i = 0; i < 6; i++) {
                setTimeout(() => {
                    const x = Math.random() * canvas.width;
                    const y = canvas.height + 50;
                    createHeart(x, y);
                }, i * 200);
            }
            
            // Launch fireworks when opening letter
            for (let i = 0; i < 4; i++) {
                setTimeout(launchFirework, i * 300);
            }
        });
        
        closeModal.addEventListener('click', () => {
            modalOverlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        });
        
        // Close modal when clicking outside
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        });
        
        // Close modal with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modalOverlay.classList.contains('active')) {
                modalOverlay.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        });
    </script>
</body>
</html>
